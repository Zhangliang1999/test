<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jy.repository.jc.adposition.AdPositionDao">
    <resultMap id="BaseResultMap" type="adPosition">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <result column="ad_id" property="adId" jdbcType="VARCHAR"/>
        <result column="ad_position_type" property="adPositionType" jdbcType="DECIMAL"/>
        <result column="title" property="title" jdbcType="VARCHAR"/>
        <result column="comment" property="comment" jdbcType="VARCHAR"/>
        <result column="url" property="url" jdbcType="VARCHAR"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="sort" property="sort" jdbcType="INTEGER"/>
        <result column="oper_id" property="operId" jdbcType="VARCHAR"/>
        <result column="ad_position_name" property="adPositionName" jdbcType="VARCHAR"/>
        <result column="path" property="path" jdbcType="VARCHAR"/>
        <result column="is_valid" property="isValid" jdbcType="VARCHAR"/>
    </resultMap>
    <select id="findByPage" resultMap="BaseResultMap" parameterType="adPosition" >
        SELECT
        ad_id,
        ad_position_type,
        title,
        comment,
        url,
        create_time,
        a.update_time,
        a.sort,
        oper_id,
        path,
        is_valid,
        c.`name` AS ad_position_name
        FROM
        jc_ad_position a,
        jy_data_dict b,
        jy_data_dict_item c
        WHERE b.`dataKey` = 'adPositionType'
        AND a.`ad_position_type` = c.`value`
        AND b.`id` = c.`dictId`
        <if test="param.adPositionType != null">
            AND a.ad_position_type=#{param.adPositionType}
        </if>
        <if test="param.keyWord != null">
            AND (
            a.title LIKE CONCAT('%',#{param.keyWord},'%')
            OR a.comment LIKE CONCAT('%',#{param.keyWord},'%')
            OR a.ad_id LIKE CONCAT('%',#{param.keyWord},'%')
            OR a.url LIKE CONCAT('%',#{param.keyWord},'%')
            )
        </if>
        <if test="param.adId != '' and param.adId != null">
            and a.ad_id = #{param.adId,jdbcType=VARCHAR}
        </if>
        ORDER BY c.`sort`, a.`sort`
    </select>
    <select id="find" resultMap="BaseResultMap" parameterType="adPosition" >
        SELECT
        ad_id,
        ad_position_type,
        title,
        comment,
        url,
        create_time,
        update_time,
        a.sort,
        oper_id,
        path,
        is_valid,
        c.`name` AS ad_position_name
        FROM
        jc_ad_position a,
        jy_data_dict b,
        jy_data_dict_item c
        WHERE b.`dataKey` = 'adPositionType'
        AND a.`ad_position_type` = c.`value`
        AND b.`id` = c.`dictId`
        <if test="adId != '' and adId != null">
            and a.ad_id = #{adId,jdbcType=VARCHAR}
        </if>
        ORDER BY c.`sort`, a.`sort`
    </select>

    <insert id="insert" parameterType="adPosition">
    insert into jc_ad_position (ad_id, ad_position_type, title,
      comment, url, create_time,
      sort, oper_id, is_valid,path)
    values (#{adId,jdbcType=VARCHAR}, #{adPositionType,jdbcType=DECIMAL}, #{title,jdbcType=VARCHAR},
      #{comment,jdbcType=VARCHAR}, #{url,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP},
      #{sort,jdbcType=INTEGER}, #{operId,jdbcType=VARCHAR}, #{isValid,jdbcType=VARCHAR},#{path,jdbcType=VARCHAR})
    </insert>

    <delete id="delete" parameterType="adPosition" >
        delete from jc_ad_position
        where ad_id = #{adId,jdbcType=VARCHAR}
    </delete>
    <!--批量删除-->
    <delete id="deleteBatch" parameterType ="java.util.List">
        DELETE FROM jc_ad_position WHERE ad_id in(
        <foreach item="o" collection="list" open="" separator="," close="" >
            #{o.adId}
        </foreach>
        )
    </delete>

    <update id="update" parameterType="adPosition">
        update jc_ad_position
        <set>
            <if test="isValid != null">
                is_valid = #{isValid,jdbcType=DECIMAL},
            </if>
            <if test="adPositionType != null">
                ad_position_type = #{adPositionType,jdbcType=DECIMAL},
            </if>
            <if test="title != null">
                title = #{title,jdbcType=VARCHAR},
            </if>
            <if test="comment != null">
                comment = #{comment,jdbcType=VARCHAR},
            </if>
            <if test="url != null">
                url = #{url,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sort != null">
                sort = #{sort,jdbcType=INTEGER},
            </if>
            <if test="operId != null">
                oper_id = #{operId,jdbcType=VARCHAR},
            </if>
            <if test="path != null">
                path = #{path,jdbcType=VARCHAR},
            </if>
        </set>
        where ad_id = #{adId,jdbcType=VARCHAR}
    </update>
</mapper>