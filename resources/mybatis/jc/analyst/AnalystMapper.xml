<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jy.repository.jc.analyst.AnalystDao">
    <!-- type="analyst" 对应Analyst.java 头部 @Alias("analyst") -->
    <resultMap id="base" type="analyst">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <result column="user_id" property="userId" jdbcType="VARCHAR"/>
        <result column="real_name" property="realName" jdbcType="VARCHAR"/>
        <result column="id_card" property="idCard" jdbcType="VARCHAR"/>
        <result column="experience" property="experience" jdbcType="VARCHAR"/>
        <result column="state" property="state" jdbcType="DECIMAL"/>
        <result column="ver_id" property="verId" jdbcType="VARCHAR"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="mobile" property="mobile" jdbcType="TIMESTAMP"/>
        <result column="nick_name" property="nickName" jdbcType="TIMESTAMP"/>
        <result column="match_type" property="matchType" jdbcType="DECIMAL"/>
    </resultMap>

    <!--分页-->
    <select id="findByPage" resultMap="base" parameterType="analyst">
        SELECT
        a.*,
        b.`mobile`, b.`nick_name`
        FROM jc_analyst a JOIN jc_user b ON a.`user_id`=b.`user_id`
        where 1=1
        <if test="param.keyWord != null">
            AND (
            a.real_name LIKE CONCAT('%',#{param.keyWord},'%')
            OR a.id_card LIKE CONCAT('%',#{param.keyWord},'%')
            OR a.user_id LIKE CONCAT('%',#{param.keyWord},'%')
            OR b.mobile LIKE CONCAT('%',#{param.keyWord},'%')
            OR b.nick_name LIKE CONCAT('%',#{param.keyWord},'%')
            )
        </if>
        <if test="param.userId != null ">
            and user_id = #{param.userId, jdbcType=VARCHAR}
        </if>
        <if test="param.state != null ">
            and state = #{param.state, jdbcType=VARCHAR}
        </if>
        <if test="param.matchType != null ">
            and match_type = #{param.matchType, jdbcType=DECIMAL}
        </if>
        ORDER BY create_time DESC
    </select>

    <!--分页-->
    <select id="find" resultMap="base" parameterType="analyst">
        SELECT
        *
        FROM jc_analyst
        WHERE 1=1
        <if test="userId != null and userId !='' ">
        and user_id = #{userId}
        </if>
        <if test="matchType != null">
            and match_type = #{matchType}
        </if>
    </select>

    <!--更新-->
    <update id="update" parameterType="analyst">
        update jc_analyst
        set real_name = #{realName,jdbcType=VARCHAR},
        id_card = #{idCard,jdbcType=VARCHAR},
        experience = #{experience,jdbcType=VARCHAR},
        state = #{state,jdbcType=DECIMAL},
        ver_id = #{verId,jdbcType=VARCHAR},
        create_time = #{createTime,jdbcType=TIMESTAMP},
        update_time = #{updateTime,jdbcType=TIMESTAMP}
        where user_id = #{userId,jdbcType=VARCHAR}
    </update>

    <delete id="delete" parameterType="BaseAccount">
        delete from jc_analyst
        WHERE user_id=#{accountId}
    </delete>
    <!--批量删除-->
    <delete id="deleteBatch" parameterType ="java.util.List">
        DELETE FROM jc_analyst WHERE user_id in(
        <foreach item="o" collection="list" open="" separator="," close="" >
            #{o.userId}
        </foreach>
        )
    </delete>

</mapper>